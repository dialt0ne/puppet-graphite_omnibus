#
# generated by puppet
# Module:   <%= scope.to_hash['module_name'] %>
# Template: <%= file %>
#
# For documentation see:
# http://graphite.readthedocs.org/en/latest/config-local-settings.html
# https://github.com/graphite-project/graphite-web/blob/master/webapp/graphite/local_settings.py.example
#
<%
    #local_settings = scope.lookupvar('graphite_omnibus::config::local_settings') 
    local_settings = @local_settings
%>
<%- if local_settings %>
    <%- local_settings.sort.each do |key1, value1| -%>
        <%- if value1.kind_of?(Array) && value1[0] == "nonstring" -%>
<%= key1 %> = <%= value1[1] %> # nonstring
        <%- elsif value1.kind_of?(Array) -%>
<%= key1 %> = [ '<%= value1.join("', '") %>' ] # Array
        <%- elsif value1.kind_of?(Hash) -%>
<%= key1 %> = { # Hash
            <%- value1.sort.each do |key2, value2| -%>
                <%- if value2.kind_of?(Array) && value2[0] == "nonstring" -%>
        '<%= key2 %>': <%= value2[1] %>, # nonstring
                <%- elsif value2.kind_of?(Array)  -%>
        '<%= key2 %>': [ '<%= value2.join("', '") %>' ], # Array
                <%- elsif value2.kind_of?(Hash) -%>
        '<%= key2 %>': { # Hash
                    <%- value2.sort.each do |key3, value3| -%>
                        <%- if value3.kind_of?(Array) && value3[0] == "nonstring" -%>
                '<%= key3 %>': <%= value3[1] %>, # nonstring
                        <%- elsif value3.kind_of?(Array) -%>
                '<%= key3 %>': [ '<%= value3.join("', '") %>' ], # Array
                        <%- elsif value3.kind_of?(Hash) -%>
                '<%= key3 %>': { # Hash
                            <%- value3.sort.each do |key4, value4| -%>
                                <%- if value4.kind_of?(Array) && value4[0] == "nonstring" -%>
                        '<%= key4 %>': <%= value4[1] %>, # nonstring
                                <%- elsif value4.kind_of?(Array) -%>
                        '<%= key4 %>': [ '<%= value4.join("', '") %>' ], # Array
                                <%- else -%>
                        '<%= key4 %>': '<%= value4 %>', # default
                                <%- end # if-value4 -%>
                            <%- end # do-value3-%>
                },
                        <%- else -%>
                '<%= key3 %>': '<%= value3 %>', # default
                        <%- end # if-value3 -%>
                    <%- end # do-value2 -%>
        },
                <%- else -%>
        '<%= key2 %>': '<%= value2 %>', # default
                <%- end # if-value2 -%>
            <%- end # do-value1-%>
}
        <%- else -%>
<%= key1 %> = '<%= value1 %>' # default 
        <%- end # if-value1 -%>
    <%- end # do-local_settings -%>
<%- else -%>
# No local_settings
<%- end # if-local_settings -%>
